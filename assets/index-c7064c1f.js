var Ne=Object.defineProperty;var Se=(e,t,n)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var G=(e,t,n)=>(Se(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function M(){}function K(e,t){for(const n in t)e[n]=t[n];return e}function me(e){return e()}function le(){return Object.create(null)}function Z(e){e.forEach(me)}function pe(e){return typeof e=="function"}function _e(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Y;function je(e,t){return e===t?!0:(Y||(Y=document.createElement("a")),Y.href=t,e===Y.href)}function Ie(e){return Object.keys(e).length===0}function Me(e,t,n,r){if(e){const o=ge(e,t,n,r);return e[0](o)}}function ge(e,t,n,r){return e[1]&&r?K(n.ctx.slice(),e[1](r(t))):n.ctx}function Fe(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const s=[],l=Math.max(t.dirty.length,o.length);for(let u=0;u<l;u+=1)s[u]=t.dirty[u]|o[u];return s}return t.dirty|o}return t.dirty}function Pe(e,t,n,r,o,s){if(o){const l=ge(t,n,r,s);e.p(l,o)}}function Ue(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Re(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function se(e,t){const n={};t=new Set(t);for(const r in e)!t.has(r)&&r[0]!=="$"&&(n[r]=e[r]);return n}function k(e,t){e.appendChild(t)}function T(e,t,n){e.insertBefore(t,n||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function j(e){return document.createElement(e)}function O(e){return document.createTextNode(e)}function P(){return O(" ")}function F(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function De(e){return function(t){return t.preventDefault(),e.call(this,t)}}function w(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const Be=["width","height"];function ue(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)t[r]==null?e.removeAttribute(r):r==="style"?e.style.cssText=t[r]:r==="__value"?e.value=e[r]=t[r]:n[r]&&n[r].set&&Be.indexOf(r)===-1?e[r]=t[r]:w(e,r,t[r])}function ze(e){return Array.from(e.childNodes)}function U(e,t){t=""+t,e.data!==t&&(e.data=t)}function ae(e,t){e.value=t??""}function H(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function He(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let Q;function q(e){Q=e}function oe(){if(!Q)throw new Error("Function called outside component initialization");return Q}function be(e){oe().$$.on_mount.push(e)}function Ve(e){oe().$$.after_update.push(e)}function qe(){const e=oe();return(t,n,{cancelable:r=!1}={})=>{const o=e.$$.callbacks[t];if(o){const s=He(t,n,{cancelable:r});return o.slice().forEach(l=>{l.call(e,s)}),!s.defaultPrevented}return!0}}function R(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const B=[],W=[];let z=[];const te=[],Qe=Promise.resolve();let ne=!1;function Ze(){ne||(ne=!0,Qe.then(ve))}function re(e){z.push(e)}function Ye(e){te.push(e)}const X=new Set;let D=0;function ve(){if(D!==0)return;const e=Q;do{try{for(;D<B.length;){const t=B[D];D++,q(t),Je(t.$$)}}catch(t){throw B.length=0,D=0,t}for(q(null),B.length=0,D=0;W.length;)W.pop()();for(let t=0;t<z.length;t+=1){const n=z[t];X.has(n)||(X.add(n),n())}z.length=0}while(B.length);for(;te.length;)te.pop()();ne=!1,X.clear(),q(e)}function Je(e){if(e.fragment!==null){e.update(),Z(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(re)}}function Ke(e){const t=[],n=[];z.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),z=t}const J=new Set;let We;function ie(e,t){e&&e.i&&(J.delete(e),e.i(t))}function ye(e,t,n,r){if(e&&e.o){if(J.has(e))return;J.add(e),We.c.push(()=>{J.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Ge(e,t){const n={},r={},o={$$scope:1};let s=e.length;for(;s--;){const l=e[s],u=t[s];if(u){for(const m in l)m in u||(r[m]=1);for(const m in u)o[m]||(n[m]=u[m],o[m]=1);e[s]=u}else for(const m in l)o[m]=1}for(const l in r)l in n||(n[l]=void 0);return n}function Xe(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function xe(e){e&&e.c()}function we(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),re(()=>{const s=e.$$.on_mount.map(me).filter(pe);e.$$.on_destroy?e.$$.on_destroy.push(...s):Z(s),e.$$.on_mount=[]}),o.forEach(re)}function Ae(e,t){const n=e.$$;n.fragment!==null&&(Ke(n.after_update),Z(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function $e(e,t){e.$$.dirty[0]===-1&&(B.push(e),Ze(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ce(e,t,n,r,o,s,l,u=[-1]){const m=Q;q(e);const a=e.$$={fragment:null,ctx:[],props:s,update:M,not_equal:o,bound:le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:le(),dirty:u,skip_bound:!1,root:t.target||m.$$.root};l&&l(a.root);let _=!1;if(a.ctx=n?n(e,t.props||{},(i,c,...d)=>{const h=d.length?d[0]:c;return a.ctx&&o(a.ctx[i],a.ctx[i]=h)&&(!a.skip_bound&&a.bound[i]&&a.bound[i](h),_&&$e(e,i)),c}):[],a.update(),_=!0,Z(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const i=ze(t.target);a.fragment&&a.fragment.l(i),i.forEach(L)}else a.fragment&&a.fragment.c();t.intro&&ie(e.$$.fragment),we(e,t.target,t.anchor),ve()}q(m)}class ke{constructor(){G(this,"$$");G(this,"$$set")}$destroy(){Ae(this,1),this.$destroy=M}$on(t,n){if(!pe(n))return M;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!Ie(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const et="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(et);var fe={},x={},$=34,V=10,ee=13;function Ee(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function tt(e,t){var n=Ee(e);return function(r,o){return t(n(r),o,e)}}function ce(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var o in r)o in t||n.push(t[o]=o)}),n}function E(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function nt(e){return e<0?"-"+E(-e,6):e>9999?"+"+E(e,6):E(e,4)}function rt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":nt(e.getUTCFullYear())+"-"+E(e.getUTCMonth()+1,2)+"-"+E(e.getUTCDate(),2)+(o?"T"+E(t,2)+":"+E(n,2)+":"+E(r,2)+"."+E(o,3)+"Z":r?"T"+E(t,2)+":"+E(n,2)+":"+E(r,2)+"Z":n||t?"T"+E(t,2)+":"+E(n,2)+"Z":"")}function ot(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(i,c){var d,h,g=o(i,function(v,f){if(d)return d(v,f-1);h=v,d=c?tt(v,c):Ee(v)});return g.columns=h||[],g}function o(i,c){var d=[],h=i.length,g=0,v=0,f,y=h<=0,N=!1;i.charCodeAt(h-1)===V&&--h,i.charCodeAt(h-1)===ee&&--h;function S(){if(y)return x;if(N)return N=!1,fe;var b,C=g,I;if(i.charCodeAt(C)===$){for(;g++<h&&i.charCodeAt(g)!==$||i.charCodeAt(++g)===$;);return(b=g)>=h?y=!0:(I=i.charCodeAt(g++))===V?N=!0:I===ee&&(N=!0,i.charCodeAt(g)===V&&++g),i.slice(C+1,b-1).replace(/""/g,'"')}for(;g<h;){if((I=i.charCodeAt(b=g++))===V)N=!0;else if(I===ee)N=!0,i.charCodeAt(g)===V&&++g;else if(I!==n)continue;return i.slice(C,b)}return y=!0,i.slice(C,h)}for(;(f=S())!==x;){for(var A=[];f!==fe&&f!==x;)A.push(f),f=S();c&&(A=c(A,v++))==null||d.push(A)}return d}function s(i,c){return i.map(function(d){return c.map(function(h){return _(d[h])}).join(e)})}function l(i,c){return c==null&&(c=ce(i)),[c.map(_).join(e)].concat(s(i,c)).join(`
`)}function u(i,c){return c==null&&(c=ce(i)),s(i,c).join(`
`)}function m(i){return i.map(a).join(`
`)}function a(i){return i.map(_).join(e)}function _(i){return i==null?"":i instanceof Date?rt(i):t.test(i+="")?'"'+i.replace(/"/g,'""')+'"':i}return{parse:r,parseRows:o,format:l,formatBody:u,formatRows:m,formatRow:a,formatValue:_}}var it=ot(","),lt=it.parse;const st=e=>({}),de=e=>({});function ut(e){let t;return{c(){t=O(e[2])},m(n,r){T(n,t,r)},p(n,r){r&4&&U(t,n[2])},d(n){n&&L(t)}}}function at(e){let t,n,r,o,s,l,u,m,a,_,i;const c=e[10].label,d=Me(c,e,e[9],de),h=d||ut(e);let g=[{name:"search"},{type:"search"},{placeholder:"Search..."},{autocomplete:"off"},{spellcheck:"false"},e[6],{id:e[4]}],v={};for(let f=0;f<g.length;f+=1)v=K(v,g[f]);return{c(){t=j("form"),n=j("label"),h&&h.c(),s=P(),l=j("input"),w(n,"id",r=e[4]+"-label"),w(n,"for",e[4]),w(n,"style",o=e[3]&&"position: absolute;height: 1px;width: 1px;overflow: hidden;clip: rect(1px 1px 1px 1px);clip: rect(1px, 1px, 1px, 1px);white-space: nowrap;"),ue(l,v),w(t,"data-svelte-search",""),w(t,"role",u=e[5]?null:"search"),w(t,"aria-labelledby",m=e[5]?null:e[4])},m(f,y){T(f,t,y),k(t,n),h&&h.m(n,null),k(t,s),k(t,l),l.autofocus&&l.focus(),e[17](l),ae(l,e[0]),a=!0,_||(i=[F(l,"input",e[18]),F(l,"input",e[12]),F(l,"change",e[13]),F(l,"focus",e[14]),F(l,"blur",e[15]),F(l,"keydown",e[16]),F(t,"submit",De(e[11]))],_=!0)},p(f,[y]){d?d.p&&(!a||y&512)&&Pe(d,c,f,f[9],a?Fe(c,f[9],y,st):Ue(f[9]),de):h&&h.p&&(!a||y&4)&&h.p(f,a?y:-1),(!a||y&16&&r!==(r=f[4]+"-label"))&&w(n,"id",r),(!a||y&16)&&w(n,"for",f[4]),(!a||y&8&&o!==(o=f[3]&&"position: absolute;height: 1px;width: 1px;overflow: hidden;clip: rect(1px 1px 1px 1px);clip: rect(1px, 1px, 1px, 1px);white-space: nowrap;"))&&w(n,"style",o),ue(l,v=Ge(g,[{name:"search"},{type:"search"},{placeholder:"Search..."},{autocomplete:"off"},{spellcheck:"false"},y&64&&f[6],(!a||y&16)&&{id:f[4]}])),y&1&&l.value!==f[0]&&ae(l,f[0]),(!a||y&32&&u!==(u=f[5]?null:"search"))&&w(t,"role",u),(!a||y&48&&m!==(m=f[5]?null:f[4]))&&w(t,"aria-labelledby",m)},i(f){a||(ie(h,f),a=!0)},o(f){ye(h,f),a=!1},d(f){f&&L(t),h&&h.d(f),e[17](null),_=!1,Z(i)}}}function ft(e,t,n){const r=["value","autofocus","debounce","label","hideLabel","id","ref","removeFormAriaAttributes"];let o=se(t,r),{$$slots:s={},$$scope:l}=t,{value:u=""}=t,{autofocus:m=!1}=t,{debounce:a=0}=t,{label:_="Label"}=t,{hideLabel:i=!1}=t,{id:c="search"+Math.random().toString(36)}=t,{ref:d=null}=t,{removeFormAriaAttributes:h=!1}=t;const g=qe();let v=u,f,y=!1;function N(p){y||(y=!0,f=setTimeout(()=>{p(),y=!1},a))}be(()=>(m&&window.requestAnimationFrame(()=>d.focus()),()=>clearTimeout(f))),Ve(()=>{u.length>0&&u!==v&&(a>0?N(()=>g("type",u)):g("type",u)),u.length===0&&v.length>0&&g("clear"),v=u});function S(p){R.call(this,e,p)}function A(p){R.call(this,e,p)}function b(p){R.call(this,e,p)}function C(p){R.call(this,e,p)}function I(p){R.call(this,e,p)}function Le(p){R.call(this,e,p)}function Oe(p){W[p?"unshift":"push"](()=>{d=p,n(1,d)})}function Te(){u=this.value,n(0,u)}return e.$$set=p=>{t=K(K({},t),Re(p)),n(6,o=se(t,r)),"value"in p&&n(0,u=p.value),"autofocus"in p&&n(7,m=p.autofocus),"debounce"in p&&n(8,a=p.debounce),"label"in p&&n(2,_=p.label),"hideLabel"in p&&n(3,i=p.hideLabel),"id"in p&&n(4,c=p.id),"ref"in p&&n(1,d=p.ref),"removeFormAriaAttributes"in p&&n(5,h=p.removeFormAriaAttributes),"$$scope"in p&&n(9,l=p.$$scope)},[u,d,_,i,c,h,o,m,a,l,s,S,A,b,C,I,Le,Oe,Te]}class ct extends ke{constructor(t){super(),Ce(this,t,ft,at,_e,{value:0,autofocus:7,debounce:8,label:2,hideLabel:3,id:4,ref:1,removeFormAriaAttributes:5})}}const dt=ct;function ht(e){let t,n=e[6][0].name+"",r,o,s,l,u,m,a,_,i=e[0]&&he(e);return{c(){t=j("p"),r=O(n),o=O(" was "),s=O(e[3]),l=O(" in "),u=O(e[1]),m=P(),a=O(e[5]),_=O(". "),i&&i.c(),w(t,"class","descriptor svelte-19azsv6")},m(c,d){T(c,t,d),k(t,r),k(t,o),k(t,s),k(t,l),k(t,u),k(t,m),k(t,a),k(t,_),i&&i.m(t,null)},p(c,d){d&64&&n!==(n=c[6][0].name+"")&&U(r,n),d&8&&U(s,c[3]),d&2&&U(u,c[1]),d&32&&U(a,c[5]),c[0]?i?i.p(c,d):(i=he(c),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(c){c&&L(t),i&&i.d()}}}function mt(e){let t;return{c(){t=j("p"),t.textContent="No one by that name was found in the database.",w(t,"class","descriptor svelte-19azsv6")},m(n,r){T(n,t,r)},p:M,d(n){n&&L(t)}}}function pt(e){return{c:M,m:M,p:M,d:M}}function he(e){let t,n,r=e[6][0].age+"",o,s;return{c(){t=O(e[4]),n=O(" was "),o=O(r),s=O(" years old.")},m(l,u){T(l,t,u),T(l,n,u),T(l,o,u),T(l,s,u)},p(l,u){u&16&&U(t,l[4]),u&64&&r!==(r=l[6][0].age+"")&&U(o,r)},d(l){l&&(L(t),L(n),L(o),L(s))}}}function _t(e){let t,n,r,o,s,l,u,m,a,_,i,c,d,h,g,v;function f(b){e[8](b)}let y={label:"",placeholder:"Enter a person’s full name..."};e[2]!==void 0&&(y.value=e[2]),o=new dt({props:y}),W.push(()=>Xe(o,"value",f)),o.$on("submit",e[9]);function N(b,C){if(C&64&&(u=null),u==null&&(u=!Array.isArray(b[6])),u)return pt;if(b[6].length===0)return mt;if(b[6].length>0)return ht}let S=N(e,-1),A=S&&S(e);return{c(){t=j("header"),t.innerHTML='<h1 class="svelte-19azsv6">Search the Midnight Order database of missing people and unsolved deaths in B.C.</h1>',n=P(),r=j("main"),xe(o.$$.fragment),l=P(),A&&A.c(),m=P(),a=j("h2"),a.textContent="Stories from the missing and murdered database",_=P(),i=j("iframe"),d=j("div"),d.innerHTML='<a class="flourish-credit" href="https://public.flourish.studio/visualisation/15410744/?utm_source=embed&amp;utm_campaign=visualisation/15410744" target="_top" style="text-decoration:none!important"><img alt="Made with Flourish" src="https://public.flourish.studio/resources/made_with_flourish.svg" style="width:105px!important;height:16px!important;border:none!important;margin:0!important;"/></a>',h=P(),g=j("footer"),g.innerHTML='<p class="note">Researchers also included a few deaths, suicides and overdoses that appeared suspicious; all Indigenous murders, whether solved or unsolved, to help build a complete list of Indigenous victims in Canada; and victims of serial killers to allow for the study of patterns.</p> <p class="note">If you know of someone that should be included in the database, please fill out <a href="https://docs.google.com/forms/d/e/1FAIpQLSeBbrOu7zBvVcdeoOj1Idi1lnaLyIMMwoPn4FtePNNgDL5-FA/viewform" target="_blank">this form</a>. Questions, corrections and comments should be sent to <a href="mailto:Midnightordermmd@gmail.com" target="_blank">midnightordermmd@gmail.com</a>.</p> <p class="source">Source: Midnight Order</p>',w(t,"class","svelte-19azsv6"),w(a,"class","svelte-19azsv6"),je(i.src,c="https://flo.uri.sh/visualisation/15410744/embed")||w(i,"src",c),w(i,"title","Interactive or visual content"),w(i,"class","flourish-embed-iframe"),w(i,"frameborder","0"),w(i,"scrolling","no"),H(i,"width","100%"),H(i,"height","450px"),w(i,"sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"),H(d,"width","100%!"),H(d,"margin-top","4px",1),H(d,"text-align","right",1),w(r,"class","svelte-19azsv6")},m(b,C){T(b,t,C),T(b,n,C),T(b,r,C),we(o,r,null),k(r,l),A&&A.m(r,null),k(r,m),k(r,a),k(r,_),k(r,i),k(r,d),T(b,h,C),T(b,g,C),v=!0},p(b,[C]){const I={};!s&&C&4&&(s=!0,I.value=b[2],Ye(()=>s=!1)),o.$set(I),S===(S=N(b,C))&&A?A.p(b,C):(A&&A.d(1),A=S&&S(b),A&&(A.c(),A.m(r,m)))},i(b){v||(ie(o.$$.fragment,b),v=!0)},o(b){ye(o.$$.fragment,b),v=!1},d(b){b&&(L(t),L(n),L(r),L(h),L(g)),Ae(o),A&&A.d()}}}const gt="https://vs-postmedia-data.sfo2.digitaloceanspaces.com/midnight-order-mmd/db-output.csv";function bt(e,t,n){let r,o,s,l,u,m,a,_;function i(v){console.log(l),n(6,_=s.filter(f=>f.name.toLowerCase()===l.toLowerCase())),console.log(_),_[0].person_state==="missing"?n(3,u="last seen"):_[0].person_state==="deceased"&&n(3,u="found dead"),_[0].location_last_seen_suburb==="unknown".toLowerCase()||_[0].location_last_seen_suburb==="NA"?n(1,o="an unconfirmed location"):n(1,o=_[0].location_last_seen_suburb),_[0].last_seen_year==="Unknown"?n(5,a="on an unconfirmed date"):n(5,a=`in ${_[0].last_seen_year}`),_[0].sex==="male"?n(4,m="He"):_[0].sex==="female"&&n(4,m="She"),_[0].age==="Unknown"?n(0,r=!1):n(0,r=!0)}async function c(v){return s=await(await fetch(v)).text(),lt(s)}async function d(){console.log("INIT!"),s=await c(gt)}be(d);function h(v){l=v,n(2,l)}return[r,o,l,u,m,a,_,i,h,()=>i()]}class vt extends ke{constructor(t){super(),Ce(this,t,bt,_t,_e,{})}}new vt({target:document.getElementById("app")});
